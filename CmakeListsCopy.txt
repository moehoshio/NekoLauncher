cmake_minimum_required(VERSION 3.12)
project(NakoL)

list(APPEND SRCFILES
    src/main.cpp
    src/loguru.cpp
    src/exec.cpp
    src/info.cpp
    src/network.cpp
)

list(APPEND INCLUDE_DIRS
    ${CMAKE_SOURCE_DIR}/src/include
)

list(APPEND LIBRARY_DIRS

)

set(CMAKE_AUTOMOC ON)
set(CMAKE_AUTORCC ON)
set(CMAKE_AUTOUIC ON)

set(CMAKE_CXX_STANDARD 20)
set(CMAKE_CXX_STANDARD_REQUIRED True)
set(CMAKE_CXX_EXTENSIONS False)

set(Qt6_DIR "C:/Qt/6.6.1/msvc2019_64")

find_package(Qt6 REQUIRED COMPONENTS Core Widgets MultimediaWidgets)
find_package(Qt6 COMPONENTS WebEngineWidgets)


add_executable(NekoL ${SRCFILES})

target_include_directories(NekoL PRIVATE ${INCLUDE_DIRS})
target_compile_features(NekoL PRIVATE cxx_std_20)

target_link_libraries(NekoL PRIVATE 
Qt6::WebEngineWidgets Qt6::Core Qt6::Widgets Qt6::MultimediaWidgets 
${LIBRARY_DIRS}/Debug/libcurl-d_imp.lib
)

if(MSVC)
    # set_target_properties(NekoL PROPERTIES WIN32_EXECUTABLE TRUE)
endif()

file(COPY 
    ${Qt6_DIR}/bin/Qt6CoreD.dll
    DESTINATION ${CMAKE_CURRENT_BINARY_DIR}/Debug
)